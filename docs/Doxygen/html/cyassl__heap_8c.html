<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Exosite Ready SDK: src/protocol_clients/cyassl_heap.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="EXOSITE-ready.logo-sheet.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Exosite Ready SDK
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cyassl__heap_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cyassl_heap.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file implements XMALLOC, XFREE, XREALLOC for cyassl These functions can be specified by the user if XMALLOC_USER is set.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;<a class="el" href="type_8h_source.html">lib/type.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="error_8h_source.html">lib/error.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">lib/debug.h</a>&gt;</code><br />
<code>#include &lt;lib/dlmalloc.h&gt;</code><br />
<code>#include &lt;lib/mspace_mem_check.h&gt;</code><br />
<code>#include &quot;<a class="el" href="cyassl__heap_8h_source.html">cyassl_heap.h</a>&quot;</code><br />
<code>#include &lt;cyassl/ctaocrypt/types.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a14008c9d326b94a5398bd3ae01861b3a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14008c9d326b94a5398bd3ae01861b3a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SSL_HEAP_SIZE</b>&#160;&#160;&#160;12000</td></tr>
<tr class="separator:a14008c9d326b94a5398bd3ae01861b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5dbaf232eb055721252c5e82dd2658e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae5dbaf232eb055721252c5e82dd2658e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SSL_HEAP_BIG_SIZE</b>&#160;&#160;&#160;15000</td></tr>
<tr class="separator:ae5dbaf232eb055721252c5e82dd2658e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7c82063eca53ff1f49fa5c058c12040a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c82063eca53ff1f49fa5c058c12040a"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>uip_sbrk</b> (ptrdiff_t incr)</td></tr>
<tr class="separator:a7c82063eca53ff1f49fa5c058c12040a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1412b82da3c295e48ee8aee5e7fe04aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1412b82da3c295e48ee8aee5e7fe04aa"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>cyassl_heap_init</b> (void)</td></tr>
<tr class="separator:a1412b82da3c295e48ee8aee5e7fe04aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2743998ef433692f1f68554a15f03efa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2743998ef433692f1f68554a15f03efa"></a>
static BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>belongs_to_big_heap</b> (int type)</td></tr>
<tr class="separator:a2743998ef433692f1f68554a15f03efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c9b66e660c8d0594a88fead475da6b0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5c9b66e660c8d0594a88fead475da6b0"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>XMALLOC</b> (size_t size, void *heap, int type)</td></tr>
<tr class="separator:a5c9b66e660c8d0594a88fead475da6b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7781a4145ce4e925392b313e4f4ad63"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae7781a4145ce4e925392b313e4f4ad63"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><b>XREALLOC</b> (void *p, size_t size, void *heap, int type)</td></tr>
<tr class="separator:ae7781a4145ce4e925392b313e4f4ad63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4dc607e12745ea1fe128d411792c62f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae4dc607e12745ea1fe128d411792c62f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>XFREE</b> (void *p, void *heap, int type)</td></tr>
<tr class="separator:ae4dc607e12745ea1fe128d411792c62f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa94bf85171fab481c50c3334078cdf13"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa94bf85171fab481c50c3334078cdf13"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ssl_heap_get_stats</b> (void)</td></tr>
<tr class="separator:aa94bf85171fab481c50c3334078cdf13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad622f5be63e319c0cc0348f7a6b62bb0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad622f5be63e319c0cc0348f7a6b62bb0"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>ssl_heap</b> [SSL_HEAP_SIZE]</td></tr>
<tr class="separator:ad622f5be63e319c0cc0348f7a6b62bb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a454ef3982917cfc24247436eb6837c5a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a454ef3982917cfc24247436eb6837c5a"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>ssl_heap_big</b> [SSL_HEAP_BIG_SIZE]</td></tr>
<tr class="separator:a454ef3982917cfc24247436eb6837c5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63a4053bc5955fc7c861917111f045a7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63a4053bc5955fc7c861917111f045a7"></a>
static mspace&#160;</td><td class="memItemRight" valign="bottom"><b>ssl_heap_space</b></td></tr>
<tr class="separator:a63a4053bc5955fc7c861917111f045a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c49468a1306361d948619f1789c704"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2c49468a1306361d948619f1789c704"></a>
static mspace&#160;</td><td class="memItemRight" valign="bottom"><b>ssl_heap_big_space</b></td></tr>
<tr class="separator:ab2c49468a1306361d948619f1789c704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a95abb659f6005b812b59a2ac50b03"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3a95abb659f6005b812b59a2ac50b03"></a>
static struct mem_block_class *&#160;</td><td class="memItemRight" valign="bottom"><b>ssl_heap_blocks</b></td></tr>
<tr class="separator:ac3a95abb659f6005b812b59a2ac50b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8fdb4469cb541e88ae9dabb7bfbd803"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8fdb4469cb541e88ae9dabb7bfbd803"></a>
static struct mem_block_class *&#160;</td><td class="memItemRight" valign="bottom"><b>ssl_heap_big_blocks</b></td></tr>
<tr class="separator:ad8fdb4469cb541e88ae9dabb7bfbd803"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75664d973604173d369b9d8a5b0358c9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a75664d973604173d369b9d8a5b0358c9"></a>
static size_t&#160;</td><td class="memItemRight" valign="bottom"><b>big_usage</b></td></tr>
<tr class="separator:a75664d973604173d369b9d8a5b0358c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e53227e214563ae30478825f2ea0c3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23e53227e214563ae30478825f2ea0c3"></a>
static size_t&#160;</td><td class="memItemRight" valign="bottom"><b>big_max_usage</b></td></tr>
<tr class="separator:a23e53227e214563ae30478825f2ea0c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file implements XMALLOC, XFREE, XREALLOC for cyassl These functions can be specified by the user if XMALLOC_USER is set. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Please read the Exosite Copyright: <a class="el" href="md__l_i_c_e_n_s_e.html#copyright">copyright</a></dd></dl>
<p>The reason to provide these functions is that they receive the allocation type based on which the XMALLOC calls can provide memory to different allocation types from different memory spaces</p>
<p>Based on the lifetime of the heap object the cyassl have:</p><ul>
<li>temporary object, which only live during connection to the server</li>
<li>socket context object which live during a connection</li>
</ul>
<p>Like this the temporary and permanent allocations can be separated and we can make sure that we're going to have unfragmented space for temporary objects which can be up to 4.5kbytes. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_fe84b31a651d1608d95dc2e6540ef310.html">protocol_clients</a></li><li class="navelem"><a class="el" href="cyassl__heap_8c.html">cyassl_heap.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
